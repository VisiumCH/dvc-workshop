schema: '2.0'
stages:
  download_mnist:
    cmd: python -m dvc_workshop.utils.generate_mnist_dataset --output-image-path data/download_mnist/Images
      --output-df-path data/download_mnist
    deps:
    - path: dvc_workshop/utils/generate_mnist_dataset.py
      md5: 0d4720d0ad42b45614ce8c1f3c44bc9d
      size: 1997
    - path: gs://dvc-workshop-raw/mnist
      md5: 7905625f8ff28798e70a2fe077ac89af.dir
      size: 313484
      nfiles: 1001
    outs:
    - path: data/download_mnist
      md5: c98421933dce5e8bd752c71ab177e9ea.dir
      size: 324484
      nfiles: 1001
  preprocess:
    cmd: python -m dvc_workshop.pipeline.preprocess.preprocessing
    deps:
    - path: data/download_mnist
      md5: c98421933dce5e8bd752c71ab177e9ea.dir
      size: 324484
      nfiles: 1001
    - path: dvc_workshop/pipeline/preprocess/
      md5: a04de5ef5237d86966b5ab82077f18de.dir
      size: 11511
      nfiles: 5
    params:
      params.py:
        PreprocessParams:
          LOWER_BOUND_COLOR:
          - 0
          - 0
          - 200
          UPPER_BOUND_COLOR:
          - 0
          - 0
          - 255
          THRESHOLD: 0.005
          IMAGE_HEIGHT: 28
          IMAGE_WIDTH: 28
    outs:
    - path: data/preprocess
      md5: baf5c5caf34fcd89695dcb1d3937dc83.dir
      size: 330531
      nfiles: 1003
  train:
    cmd: python -m dvc_workshop.pipeline.train.training
    deps:
    - path: data/preprocess
      md5: baf5c5caf34fcd89695dcb1d3937dc83.dir
      size: 330531
      nfiles: 1003
    - path: dvc_workshop/pipeline/train
      md5: 8a08a3ce7bed0d5c92d0297d7fd6d758.dir
      size: 3943
      nfiles: 4
    params:
      params.py:
        ModelParams:
          MODEL_NAME: classifier
          COLOR_TYPE: grayscale
          NUMBER_CHANNELS: 1
          POOLING: max
          ACTIVATION: softmax
          TOP: false
        PreprocessParams:
          LOWER_BOUND_COLOR:
          - 0
          - 0
          - 200
          UPPER_BOUND_COLOR:
          - 0
          - 0
          - 255
          THRESHOLD: 0.005
          IMAGE_HEIGHT: 28
          IMAGE_WIDTH: 28
    outs:
    - path: data/train
      md5: b9278087c71db701f28a160a03cfeba4.dir
      size: 1067003
      nfiles: 7
  evaluate:
    cmd: python -m dvc_workshop.pipeline.evaluate.evaluation
    deps:
    - path: data/preprocess/
      md5: baf5c5caf34fcd89695dcb1d3937dc83.dir
      size: 330531
      nfiles: 1003
    - path: data/train
      md5: b9278087c71db701f28a160a03cfeba4.dir
      size: 1067003
      nfiles: 7
    - path: dvc_workshop/pipeline/evaluate/
      md5: 1e0c6fdf3783e29f93f1947e58564deb.dir
      size: 2522
      nfiles: 4
    params:
      params.py:
        ModelParams:
          MODEL_NAME: classifier
          COLOR_TYPE: grayscale
          NUMBER_CHANNELS: 1
          POOLING: max
          ACTIVATION: softmax
          TOP: false
    outs:
    - path: data/evaluate
      md5: ee3672b697a2b3f43d60e4343c560b6f.dir
      size: 186
      nfiles: 1
  plot:
    cmd: python -m dvc_workshop.pipeline.plot.plotting
    deps:
    - path: data/train
      md5: b9278087c71db701f28a160a03cfeba4.dir
      size: 1067003
      nfiles: 7
    - path: dvc_workshop/pipeline/plot
      md5: 2c3935cb716f31bdb3e37c8ee3d4635e.dir
      size: 3243
      nfiles: 3
    outs:
    - path: data/plot
      md5: 4e91723c1c90884fee3476501379bc51.dir
      size: 222069
      nfiles: 1
